-- ============================================================
-- Тестовые данные для демонстрации всех запросов из ТЗ
-- ============================================================

-- ------------------------------------------------------------
-- 1. Категории (дерево глубиной 3 уровня)
-- ------------------------------------------------------------
INSERT INTO categories (id, name, parent_id) VALUES
-- Корневые категории (уровень 0)
(1, 'Электроника', NULL),
(2, 'Одежда', NULL),
(3, 'Книги', NULL),

-- Дети Электроники (уровень 1)
(4, 'Телефоны', 1),
(5, 'Ноутбуки', 1),
(6, 'Аксессуары', 1),

-- Дети Одежды (уровень 1)
(7, 'Верхняя одежда', 2),
(8, 'Обувь', 2),

-- Внуки: дети Телефонов (уровень 2)
(9, 'Смартфоны', 4),
(10, 'Раскладушки', 4),

-- Внуки: дети Ноутбуков (уровень 2)
(11, 'Игровые', 5),
(12, 'Офисные', 5),

-- Внуки: дети Верхней одежды (уровень 2)
(13, 'Куртки', 7),
(14, 'Пальто', 7);

-- ------------------------------------------------------------
-- 2. Товары (номенклатура)
-- ------------------------------------------------------------
INSERT INTO products (id, name, quantity, price, category_id) VALUES
-- Телефоны
(1, 'iPhone 15', 10, 89990.00, 9),
(2, 'Samsung Galaxy S24', 15, 75000.00, 9),
(3, 'Nokia 3310', 50, 3500.00, 10),

-- Ноутбуки
(4, 'MacBook Pro 16"', 8, 249990.00, 11),
(5, 'Lenovo IdeaPad', 20, 45000.00, 12),

-- Аксессуары
(6, 'Чехол для iPhone', 100, 1500.00, 6),
(7, 'Зарядное устройство', 200, 800.00, 6),

-- Одежда
(8, 'Куртка зимняя', 30, 12000.00, 13),
(9, 'Кроссовки Nike', 40, 8500.00, 8),

-- Книги
(10, 'Гарри Поттер', 25, 1200.00, 3),
(11, 'Война и мир', 15, 900.00, 3);

-- ------------------------------------------------------------
-- 3. Клиенты
-- ------------------------------------------------------------
INSERT INTO clients (id, name, address) VALUES
(1, 'Иван Петров', 'г. Москва, ул. Тверская, д. 10'),
(2, 'Мария Сидорова', 'г. Санкт-Петербург, Невский пр., д. 25'),
(3, 'Алексей Козлов', 'г. Екатеринбург, ул. Ленина, д. 5'),
(4, 'Ольга Смирнова', 'г. Новосибирск, ул. Советская, д. 15');

-- ------------------------------------------------------------
-- 4. Заказы (с разными датами для пункта 2.3.1)
-- ------------------------------------------------------------
INSERT INTO orders (id, client_id, created_at, status) VALUES
-- Заказы за последний месяц (для топ-5)
(1, 1, CURRENT_TIMESTAMP - INTERVAL '5 days', 'confirmed'),
(2, 2, CURRENT_TIMESTAMP - INTERVAL '10 days', 'confirmed'),
(3, 1, CURRENT_TIMESTAMP - INTERVAL '15 days', 'confirmed'),
(4, 3, CURRENT_TIMESTAMP - INTERVAL '20 days', 'confirmed'),
(5, 4, CURRENT_TIMESTAMP - INTERVAL '25 days', 'confirmed'),

-- Заказы старше месяца (не должны попасть в топ-5)
(6, 2, CURRENT_TIMESTAMP - INTERVAL '40 days', 'confirmed'),
(7, 3, CURRENT_TIMESTAMP - INTERVAL '50 days', 'confirmed');

-- ------------------------------------------------------------
-- 5. Позиции заказов
-- ------------------------------------------------------------
INSERT INTO order_items (order_id, product_id, quantity, price_at_order) VALUES
-- Заказ 1: Иван Петров
(1, 1, 1, 89990.00),   -- iPhone 15
(1, 6, 2, 1500.00),    -- 2 чехла

-- Заказ 2: Мария Сидорова
(2, 2, 1, 75000.00),   -- Samsung
(2, 7, 3, 800.00),     -- 3 зарядки

-- Заказ 3: Иван Петров (повторно)
(3, 4, 1, 249990.00),  -- MacBook Pro

-- Заказ 4: Алексей Козлов
(4, 5, 2, 45000.00),   -- 2 ноутбука
(4, 9, 1, 8500.00),    -- кроссовки

-- Заказ 5: Ольга Смирнова
(5, 8, 1, 12000.00),   -- куртка
(5, 10, 3, 1200.00),   -- 3 книги Гарри Поттер

-- Заказ 6: старый заказ (40 дней назад)
(6, 3, 5, 3500.00),    -- 5 раскладушек Nokia

-- Заказ 7: старый заказ (50 дней назад)
(7, 11, 2, 900.00);    -- 2 книги "Война и мир"